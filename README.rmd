---
title: "FindTaxaCtrbt"
author: Menghan Liu
date: December 12, 2019
output:
  md_document:
    variant: markdown_github
theme: cosmo
code_folding: hide
---


```{r setup, echo = FALSE, eval=TRUE}
knitr::opts_knit$set()
dir='/Users/menghanliu/Documents/FindTaxaCtrbt'
knitr::opts_knit$set(root.dir = dir)
knitr::opts_chunk$set(message = FALSE,warning = FALSE)
```

```{r library packae, echo = FALSE, eval=TRUE}
library(dplyr)
library(kableExtra)
```

# FindTaxaCtrbt

Author: Menghan Liu  @ [twitter](https://twitter.com/menghan_liu) 


## TOC 

1. [Installation](#installation)
2. [Getting started](#get_start)
3. [Tutorial](#tutorial)


## Installation {#installation}

## Getting started

**Step 1. Environment setup via Conda**

The environment required for FindTaxaCtrbt can be handled via creating a conda environment based on the provided .yml file *FindTaxaCtrbt_environment.yml*, with the following code

```
conda env create -n <your_desired_environment_name> --file FindTaxaCtrbt_environment.yml # Create a new conda environment

conda activate <your_desired_environment_name> # initiate the environment
```

Of course, you can name the environment however you want, by just substitute the conda env name parameter `conda env create -n  --file FindTaxaCtrbt_environment.yml`


If you have the dependencies already, you can skip this step; or install the dependencies manually, 

- Diamond (v0.9.14 currently included in the *FindTaxaCtrbt_environment.yml*)
- R 
   *  R v3.3.2
   *  R packages: dplyr, tidyr
- Parallel (v0.9.14)
   
**Step 2. Download data**

Two part of input data is required 

1. a comprehensive list of protein homologs for the function of interest
   - a **.fasta file** containging their amino acid sequences  
   - a **.csv table** containing their taxonomic origin 
  
  

  
  
2. Metagenomics and metatranscriptomics sample for the microbial community you're interested in.


Step 3. 


## Tutorial {#tutorial}
For example, I am interested in the oxalyl-coA decarboxylase (OXC), which is involved in the oxalate degradation function.

Therefore, I found a [homologous protein family](http://www.ebi.ac.uk/interpro/entry/InterPro/IPR017660/) for OXC at Uniprot.



```{r example table, echo=FALSE,eval=TRUE}
table_dir='/Volumes/Research/blaserlab/blaserlabspace/Members/Menghan_Liu/ODE/human_metagenomics/0_data/ODE_tnaA_info.csv'

read.csv(table_dir) %>%
  head() %>%
  dplyr::mutate(UniprotID = name,
                Strain = Species) %>%
  tidyr::separate(Species, into = c("Genus","Species"),sep=" ",extra="drop") %>%
  dplyr::select(UniprotID,Description,Phylum, Family, Genus, Species, Strain) %>%
  knitr::kable(format = "markdown") %>%
  kable_styling(font_size = 7, full_width = F) 
```





